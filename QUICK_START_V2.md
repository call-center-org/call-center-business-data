# å¿«é€Ÿå¼€å§‹æŒ‡å—ï¼ˆv2.0ï¼‰

> 5 åˆ†é’Ÿå¯åŠ¨å¤–å‘¼æ•°æ®ç³»ç»Ÿå‰åç«¯

---

## ğŸ“‹ å‰ç½®è¦æ±‚

- âœ… Node.js 16+ ï¼ˆå‰ç«¯ï¼‰
- âœ… Python 3.8+ ï¼ˆåç«¯ï¼‰
- âœ… å† å®¢ API å¯†é’¥

---

## ğŸš€ æ­¥éª¤ 1ï¼šå¯åŠ¨åç«¯ï¼ˆ5 æ­¥ï¼‰

### 1.1 è¿›å…¥åç«¯ç›®å½•

```bash
cd backend
```

### 1.2 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶æ¿€æ´»

```bash
python -m venv venv

# macOS / Linux
source venv/bin/activate

# Windows
venv\Scripts\activate
```

### 1.3 å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 1.4 é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®å† å®¢ API å¯†é’¥ï¼š

```env
GUANKE_API_SECRET=ä½ çš„å† å®¢å¯†é’¥
```

### 1.5 åˆå§‹åŒ–æ•°æ®åº“å¹¶å¯åŠ¨

```bash
# åˆå§‹åŒ–æ•°æ®åº“
python scripts/init_db.py

# å¯åŠ¨åç«¯
python run.py
```

âœ… çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºæˆåŠŸï¼š

```
* Running on http://127.0.0.1:5001
```

**æµ‹è¯•åç«¯**ï¼šæ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5001/api/health

åº”è¯¥çœ‹åˆ°ï¼š
```json
{
  "status": "healthy",
  "service": "call-center-business-data",
  "version": "2.0.0"
}
```

---

## ğŸ¨ æ­¥éª¤ 2ï¼šå¯åŠ¨å‰ç«¯ï¼ˆ3 æ­¥ï¼‰

### 2.1 å›åˆ°é¡¹ç›®æ ¹ç›®å½•

```bash
cd ..  # å¦‚æœåœ¨ backend/ ç›®å½•ï¼Œå›åˆ°æ ¹ç›®å½•
```

### 2.2 å®‰è£…ä¾èµ–

```bash
npm install
```

### 2.3 å¯åŠ¨å‰ç«¯

```bash
npm run dev
```

âœ… çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºæˆåŠŸï¼š

```
VITE v... ready in ... ms
âœ Local:   http://localhost:3001/
```

---

## ğŸ§ª æ­¥éª¤ 3ï¼šæµ‹è¯•ï¼ˆ2 æ­¥ï¼‰

### 3.1 ç”Ÿæˆæµ‹è¯• Token

åœ¨åç«¯ç›®å½•æ‰§è¡Œï¼š

```bash
cd backend
python scripts/generate_test_token.py
```

å¤åˆ¶ç”Ÿæˆçš„ Tokenã€‚

### 3.2 åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•

1. æ‰“å¼€ http://localhost:3001
2. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
3. è¾“å…¥ä»¥ä¸‹å‘½ä»¤è®¾ç½® Tokenï¼š

```javascript
localStorage.setItem('auth_token', 'ä½ å¤åˆ¶çš„Token')
```

4. åˆ·æ–°é¡µé¢
5. æ‰“å¼€æ§åˆ¶å°ï¼Œåº”è¯¥èƒ½çœ‹åˆ°å‰ç«¯è°ƒç”¨åç«¯çš„ API è¯·æ±‚

---

## ğŸ‰ æˆåŠŸæ£€æŸ¥æ¸…å•

- [ ] åç«¯å¯åŠ¨æˆåŠŸï¼ˆhttp://localhost:5001/api/health è¿”å› healthyï¼‰
- [ ] å‰ç«¯å¯åŠ¨æˆåŠŸï¼ˆhttp://localhost:3001 èƒ½è®¿é—®ï¼‰
- [ ] æµè§ˆå™¨æ§åˆ¶å°èƒ½çœ‹åˆ° API è¯·æ±‚æ—¥å¿—
- [ ] æ²¡æœ‰ 401 è®¤è¯é”™è¯¯

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: åç«¯å¯åŠ¨å¤±è´¥ï¼Ÿ

**æ£€æŸ¥**ï¼š
- Python ç‰ˆæœ¬æ˜¯å¦ 3.8+ï¼Ÿ
- è™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ¿€æ´»ï¼Ÿ
- ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´ï¼Ÿ

**è§£å†³**ï¼š
```bash
pip install --upgrade pip
pip install -r requirements.txt
```

### Q2: å‰ç«¯æ— æ³•è¿æ¥åç«¯ï¼Ÿ

**æ£€æŸ¥**ï¼š
- åç«¯æ˜¯å¦å¯åŠ¨ï¼Ÿï¼ˆè®¿é—® http://localhost:5001/api/healthï¼‰
- æ˜¯å¦æœ‰ CORS é”™è¯¯ï¼Ÿ

**è§£å†³**ï¼šç¡®ä¿åç«¯æ­£åœ¨è¿è¡Œï¼ŒCORS å·²é…ç½®ã€‚

### Q3: API è¿”å› 401 é”™è¯¯ï¼Ÿ

**åŸå› **ï¼šJWT Token æœªè®¾ç½®æˆ–æ— æ•ˆ

**è§£å†³**ï¼š
1. è¿è¡Œ `python scripts/generate_test_token.py` ç”Ÿæˆ Token
2. åœ¨æµè§ˆå™¨æ§åˆ¶å°è®¾ç½®ï¼š`localStorage.setItem('auth_token', 'ä½ çš„Token')`

### Q4: æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Ÿ

**è§£å†³**ï¼š
```bash
cd backend
rm -f business_data.db  # åˆ é™¤æ—§æ•°æ®åº“
python scripts/init_db.py  # é‡æ–°åˆå§‹åŒ–
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

- ğŸ“– é˜…è¯» [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md) äº†è§£è¯¦ç»†æ¶æ„
- ğŸš€ æŸ¥çœ‹ [DEPLOYMENT.md](./DEPLOYMENT.md) äº†è§£å¦‚ä½•éƒ¨ç½²
- ğŸ“Š åŒæ­¥å†å²æ•°æ®ï¼š`python scripts/sync_initial_data.py 30`

---

## ğŸ’¡ æç¤º

**å¼€å‘æ—¶æ¨èçš„ç»ˆç«¯å¸ƒå±€**ï¼š

```
ç»ˆç«¯ 1ï¼ˆåç«¯ï¼‰          ç»ˆç«¯ 2ï¼ˆå‰ç«¯ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cd backend     â”‚      â”‚ npm run dev    â”‚
â”‚ python run.py  â”‚      â”‚                â”‚
â”‚                â”‚      â”‚ âœ… Vite ready  â”‚
â”‚ âœ… Flask ready â”‚      â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æœ€åæ›´æ–°**: 2025-10-19  
**ç‰ˆæœ¬**: v2.0

































